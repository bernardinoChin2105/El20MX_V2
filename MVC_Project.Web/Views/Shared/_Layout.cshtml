@using MVC_Project.Web.AuthManagement.Models
@{
    AuthUser authUser = ViewBag.UserProfile;
}
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>@ViewBag.Title | @System.Web.Configuration.WebConfigurationManager.AppSettings["AppName"]</title>

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>
    <!-- Add local styles, mostly for plugins css file -->
    @if (IsSectionDefined("Styles"))
    {@RenderSection("Styles", required: false)}

    <!-- Add jQuery Style direct - used for jQGrid plugin -->
    <link href="@Url.Content("~/Scripts/template/plugins/jquery-ui/jquery-ui.min.css")" rel="stylesheet" type="text/css" />

    <!-- Primary Inspinia style -->
    @Styles.Render("~/Content/template/css")
    @Styles.Render("~/font-awesome/css")
    @Styles.Render("~/plugins/toastrStyles")
    @Styles.Render("~/plugins/sweetAlertStyles")
    @Scripts.Render("~/font-awesome/js")
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/plugins/sweetAlert")
    @Scripts.Render("~/plugins/bluebird")
</head>
<body>
    <!-- Wrapper-->
    <!-- PageClass give you ability to specify custom style for specific view based on action -->
    <div id="wrapper" class="@Html.PageClass()">

        <!-- Navigation -->
        @Html.Partial("_Navigation")

        <!-- Page wraper -->
        <div id="page-wrapper" class="gray-bg @ViewBag.SpecialClass">

            <!-- Top Navbar -->
            @Html.Partial("_TopNavbar")

            <div class="row wrapper border-bottom white-bg page-heading">
                <div class="col-sm-4">
                    <h2>@ViewBag.Title</h2>
                    @*<ol class="breadcrumb">
                        <li class="active">
                            <strong>Usuarios</strong>
                        </li>
                    </ol>*@
                </div>
            </div>
            <!-- Main view  -->
            @RenderBody()

            <!-- Footer -->
            @Html.Partial("_Footer")
        </div>
        <!-- End page wrapper-->
        <!-- Right Sidebar -->
        @Html.Partial("_RightSidebar")
    </div>
    <!-- End wrapper-->
    <!-- Section for main scripts render -->
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @Scripts.Render("~/plugins/slimScroll")
    @Scripts.Render("~/bundles/inspinia")
    @Scripts.Render("~/plugins/toastr")
    <script type="text/javascript">
        
        $(document).ajaxError(function (e, xhr) {
            if (xhr.status == 401) {
                window.location = "@Url.Action("Login","Auth")";
            }
            else if (xhr.status == 403) {
                toastr["error"]("@ErrorMessages.UserWithoutPermissions");
            }
            else if (xhr.status == 410) {
                if (xhr.responseText) {
                    try {
                        var jsonResponse = JSON.parse(xhr.responseText);
                        if (jsonResponse.Message) {
                            toastr["error"](jsonResponse.Message);
                        }
                    } catch (e) {
                        toastr["error"](xhr.responseText);
                    }
                }
            }
        });
    </script>
    <!-- Handler for local scripts -->
    @RenderSection("scripts", required: false)

    @if (Html.TieneMensaje())
    {
        var mensaje = @Html.ObtenerMensaje();
        <script type="text/javascript">
            toastr['@mensaje.Tipo']('@mensaje.Mensaje');
        </script>
    }
</body>
</html>